<div class="content-wrapper">
  <section class="content-header">
    <h1>
      Obra
    </h1>
  </section>
  <section class="content-header">
    <div class="col-lg-12">
      <div class="box box-primary">
        <div class="box-header with-border">
          <h3 class="box-title">Editar</h3>
        </div>
        <form novalidate (ngSubmit)="editconstruction()" [formGroup]="constructionForm">
          <div class="form-horizontal">
          <div class="alert alert-danger" *ngIf="errors.length > 0">
            <h3 id="msgRetorno">Opa! Alguma coisa não deu certo:</h3>
            <ul>
              <li *ngFor="let error of errors">{{ error.value }}</li>
            </ul>
          </div>
          <div class="box-body">
            <div class="form-group" [ngClass]="{'has-error': displayMessage.description }">
              <div class="col-md-12">
                <label class="control-label" for="description">Descrição da obra</label>
                <input class="form-control" id="description" type="text" placeholder="Descrição" formControlName="description" />
                <span class="help-block" *ngIf="displayMessage.description">
                   <p [innerHTML]="displayMessage.description"></p>
                 </span>
              </div>
            </div>
            <div class="form-group" [ngClass]="{'has-error': displayMessage.nickname }">
              <div class="col-md-12">
                <label class="control-label" for="nickname">Apelido da obra</label>
                <input class="form-control" id="nickname" type="text" placeholder="Apelido" formControlName="nickname" />
                <span class="help-block" *ngIf="displayMessage.nickname">
                    <p [innerHTML]="displayMessage.nickname"></p>
                 </span>
              </div>
            </div>
            <div class="form-group" [ngClass]="{'has-error': displayMessage.name }">
              <div class="col-md-12">
                <label class="control-label" for="name">Nome da obra</label>
                <textarea class="form-control" cols="40" rows="5" placeholder="Nome" formControlName="name"></textarea>
                <span class="help-block" *ngIf="displayMessage.name">
                    <p [innerHTML]="displayMessage.name"></p>
                </span>
              </div>
            </div>
            <div class="form-group">
              <div [ngClass]="{'has-error': displayMessage.campId }">
                <div class="col-md-3">
                  <label class="control-label">Campus</label>
                  <select class="form-control" formControlName="campId">
                      <option *ngFor="let item of campi;" [value]="item.id">
                        {{item.city}}
                      </option>
                  </select>
                  <span class="help-block" *ngIf="displayMessage.campId">
                      <p [innerHTML]="displayMessage.campId"></p>
                  </span>
                </div>
              </div>
              <div [ngClass]="{'has-error': displayMessage.typeOfConstructionId }">
                <div class="col-md-3">
                  <label class="control-label">Tipo</label>
                  <select class="form-control" formControlName="typeOfConstructionId">
                      <option *ngFor="let item of typeOfConstructions;" [value]="item.id">
                        {{item.description}}
                      </option>
                  </select>
                  <span class="help-block" *ngIf="displayMessage.typeOfConstructionId">
                    <p [innerHTML]="displayMessage.typeOfConstructionId"></p>
                  </span>
                </div>
              </div>
              <div [ngClass]="{'has-error': displayMessage.situationId }">
                <div class="col-md-3">
                  <label class="control-label">Situação</label>
                  <select class="form-control" formControlName="situationId">
                      <option *ngFor="let item of situations;" [value]="item.id">
                        {{item.description}}
                      </option>
                  </select>
                  <span class="help-block" *ngIf="displayMessage.situationId">
                      <p [innerHTML]="displayMessage.situationId"></p>
                  </span>
                </div>
              </div>
              <div [ngClass]="{'has-error': displayMessage.typeOfInspectionId }">
                <div class="col-md-3">
                  <label class="control-label">Tipo fiscalização</label>
                  <select class="form-control" formControlName="typeOfInspectionId">
                      <option *ngFor="let item of typeOfInspections;" [value]="item.id">
                        {{item.description}}
                      </option>
                  </select>
                  <span class="help-block" *ngIf="displayMessage.typeOfInspectionId">
                        <p [innerHTML]="displayMessage.typeOfInspectionId"></p>
                  </span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div [ngClass]="{'has-error': displayMessage.signatureDate }">
                <div class="col-md-3">
                  <label class="control-label">Assinatura</label>
                  <my-date-picker name="signatureDate" [options]="myDatePickerOptions" formControlName="signatureDate"></my-date-picker>
                  <span class="help-block" *ngIf="displayMessage.signatureDate">
                              <p [innerHTML]="displayMessage.signatureDate"></p>
                </span>
                </div>
              </div>
              <div [ngClass]="{'has-error': displayMessage.startDate }">
                <div class="col-md-3">
                  <label class="control-label">Início</label>
                  <my-date-picker name="startDate" [options]="myDatePickerOptions" formControlName="startDate"></my-date-picker>
                  <span class="help-block" *ngIf="displayMessage.startDate">
                              <p [innerHTML]="displayMessage.startDate"></p>
                </span>
                </div>
              </div>
              <div [ngClass]="{'has-error': displayMessage.endDate }">
                <div class="col-md-3">
                  <label class="control-label">Término</label>
                  <my-date-picker name="endDate" [options]="myDatePickerOptions" formControlName="endDate"></my-date-picker>
                  <span class="help-block" *ngIf="displayMessage.endDate">
                      <p [innerHTML]="displayMessage.endDate"></p>
                  </span>
                </div>
              </div>
              <div [ngClass]="{'has-error': displayMessage.contractTerminationDate }">
                <div class="col-md-3">
                  <label class="control-label">Encerramento contrato</label>
                  <my-date-picker name="contractTerminationDate" [options]="myDatePickerOptions" formControlName="contractTerminationDate"></my-date-picker>
                  <span class="help-block" *ngIf="displayMessage.contractTerminationDate">
                     <p [innerHTML]="displayMessage.contractTerminationDate"></p>
                  </span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div [ngClass]="{'has-error': displayMessage.area }">
                <div class="col-md-2">
                  <label class="control-label">Área</label>
                  <input class="form-control" type="number" placeholder="Área" formControlName="area" />
                  <span class="help-block" *ngIf="displayMessage.area">
                    <p [innerHTML]="displayMessage.area"></p>
               </span>
                </div>
              </div>
              <div [ngClass]="{'has-error': displayMessage.estimatedValue }">
                <div class="col-md-2">
                  <label class="control-label">Valor estimado</label>
                  <input class="form-control" value="0" type="text" placeholder="Valor R$" formControlName="estimatedValue" />
                  <span class="help-block" *ngIf="displayMessage.estimatedValue">
                    <p [innerHTML]="displayMessage.estimatedValue"></p>
               </span>
                </div>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="form-group pull-right">
                <button type="submit" class="btn btn-default" (click)="goBack()">Voltar</button>
                <button class="btn btn-primary" type="submit" [disabled]='!constructionForm.valid'>Adicionar</button>
              </div>
            </div>
          </div>
          </div>
        </form>

        <div class='has-error'>{{errors}}</div>
      </div>
    </div>
  </section>
</div>
